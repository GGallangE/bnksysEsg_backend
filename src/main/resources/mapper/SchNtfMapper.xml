<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bnksys.esg.mapper.SchNtfMapper">

    <select id = "MaxbatchlistId">
        SELECT COALESCE(MAX(BATCH_LIST_ID), 0) + 1
        FROM BATCH_LIST
    </select>

    <select id = "getApiName">
        SELECT API_NM
          FROM API_LIST
         WHERE API_LIST_ID = #{apilistid}
    </select>

    <insert id="save_BatchSchedule">
        INSERT INTO BATCH_LIST
        VALUES (#{batchlistDto.batchlistid}, #{userid}, #{batchlistDto.apilistid}, #{batchlistDto.batchtime}, #{batchlistDto.frequency},
                #{batchlistDto.time}, #{batchlistDto.dayofweek}, #{batchlistDto.dayofmonth}, "01")
    </insert>

    <insert id = "save_Alarm">
        INSERT INTO ALARM(TITLE, CONTENT, REG_DT, READ_DT, SEND_USER, RCV_USER)
        VALUES (#{title}, #{content}, DATE_FORMAT(NOW(), '%Y%m%d%H%i%s'), NULL, #{senduser}, #{rcvuser})
    </insert>


</mapper>